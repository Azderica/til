<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/til/blog/rss.xml" title="Log that Today I Learned Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/til/blog/atom.xml" title="Log that Today I Learned Blog Atom Feed"><title data-react-helmet="true">Exceptions | Log that Today I Learned</title><meta data-react-helmet="true" property="og:url" content="https://Azderica.github.io/til/docs/Java/effective-java/ch9"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Exceptions | Log that Today I Learned"><meta data-react-helmet="true" name="description" content="Item 69. 예외는 진짜 예외 상황에서만 사용합니다."><meta data-react-helmet="true" property="og:description" content="Item 69. 예외는 진짜 예외 상황에서만 사용합니다."><link data-react-helmet="true" rel="shortcut icon" href="/til/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://Azderica.github.io/til/docs/Java/effective-java/ch9"><link data-react-helmet="true" rel="alternate" href="https://Azderica.github.io/til/docs/Java/effective-java/ch9" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://Azderica.github.io/til/docs/Java/effective-java/ch9" hreflang="x-default"><link rel="stylesheet" href="/til/assets/css/styles.dc5e9681.css">
<link rel="preload" href="/til/assets/js/runtime~main.5896d016.js" as="script">
<link rel="preload" href="/til/assets/js/main.c4550fed.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/til/"><strong class="navbar__title">Azderica TIL</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/til/docs/intro">Docs</a><a href="https://Azderica.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://github.com/Azderica" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/til/"><strong class="navbar__title">Azderica TIL</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/til/docs/intro">Docs</a></li><li class="menu__list-item"><a href="https://Azderica.github.io" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://github.com/Azderica" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/til/docs/intro">📚Welcome TIL</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Dev</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Clean Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/clean-architecture/README">Clean Architecture</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Clean Code</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/clean-code/ch1">Clean Code 내용 정리 - 1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/clean-code/ch2">Clean Code 내용 정리 - 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/clean-code/ch3">Clean Code 내용 정리 - 3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/clean-code/ch4">Clean Code 내용 정리 - 4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/clean-code/ch5">Clean Code 내용 정리 - 5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/clean-code/ch6">Clean Code 내용 정리 - 6</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">객체 지향과 디자인 패턴</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/object-orientation-and-design-patterns/ch1">객체 지향</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/object-orientation-and-design-patterns/ch2">설계 원칙/ DI와 서비스 로케이터</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Dev/object-orientation-and-design-patterns/ch3">주요 디자인 패턴</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Effective Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch1">객체 생성과 삭제</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch2">모든 객체의 공통적인 메소드</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch3">클래스와 인터페이스</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch4">제네릭</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch5">Enums 와 Annotation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch6">Lambdas and Streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch7">Methods</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch8">General Programming</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/til/docs/Java/effective-java/ch9">Exceptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch10">Concurrency (동시성)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/til/docs/Java/effective-java/ch11">Serialization</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Optimizing Java</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Java/optimizing-java/ch1">성능과 최적화</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Java/optimizing-java/ch2">JVM 이야기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Java/optimizing-java/ch3">하드웨어와 운영체제</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Java/optimizing-java/ch4">성능 테스트 패턴 및 안티패턴</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Java/optimizing-java/ch5">마이크로벤치마킹과 통계</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Java/optimizing-java/ch6">가비지 수집 기초</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Spring</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">토비의 스프링</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Spring/toby-spring/ch1">1장. 오브젝트와 의존관계</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Web</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">HTTP 완벽 가이드</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/til/docs/Web/http-perfect-guide/ch1">HTTP : 웹의 기초</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Exceptions</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="item-69-예외는-진짜-예외-상황에서만-사용합니다"></a>Item 69. 예외는 진짜 예외 상황에서만 사용합니다.<a class="hash-link" href="#item-69-예외는-진짜-예외-상황에서만-사용합니다" title="Direct link to heading">#</a></h2><p>예외는 꼭 필요한 경우에만 사용해야합니다.아래는 잘못 사용한 케이스입니다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  int i = 0;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  while(true)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    range[i++].climb();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch (Exception e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>예외를 사용할 때는 몇가지 준수사항이 있습니다.</p><ul><li>예외는 예외적인 상황을위해 설계되었기 때문에, JVM 구현자가 명시적으로 빠르게 할 필요가 없습니다.</li><li><code>try-catch</code> 블록 내에 코드를 배치하면 JVM 구현이 수행할 수 있는 특정 최적화가 금지됩니다.</li><li>배열을 반복하는 표준 관용구가 반드시 중복 검사를 발생시키는 것이 아닙니다.</li></ul><p>따라서, 예외는 반드시 예외 상황에서만 사용해야하며 일반적인 제어 흐름에서는 절대로 사용하면 안됩니다. 이를 위해 상태 검사 메서드 등을 제공하거나, Optional, 또는 특정 값을 반환하면 안됩니다.</p><p>이는 API 설계에도 적용되는 규칙입니다. 잘 설계된 API는 클라이언트가 일반 제어 흐름에 예외를 사용하도록 강요하면 안됩니다.</p><p>아래와 같은 코드는 매우 잘못된 코드입니다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 컬렉션 반복에 이런 코드는 최악입니다.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Iterator &lt;Foo&gt; i = collection.iterator ();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  while (true) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Foo foo = i.next ();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch (NoSuchElementException e) { ... }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>위와 같은 코드는 매우 잘못된 코드입니다. 따라서, 예외는 예외적인 조건을 위해 설계되었습니다. 일반적으로 사용하는 제어문에 사용하면 안되며, 다른 사람들이 그렇게 하도록 강요하는 API를 작성하면 안됩니다.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="item-70-복구-가능한-조건에는-체크된-예외를-사용하고-프로그래밍-오류에는-런타임-예외를-사용합니다"></a>Item 70. 복구 가능한 조건에는 체크된 예외를 사용하고, 프로그래밍 오류에는 런타임 예외를 사용합니다.<a class="hash-link" href="#item-70-복구-가능한-조건에는-체크된-예외를-사용하고-프로그래밍-오류에는-런타임-예외를-사용합니다" title="Direct link to heading">#</a></h2><p>자바는 <code>checked exception</code>, <code>runtime exception</code>, <code>errors</code>의 3가지 종류의 throwable을 제공합니다. 각 종류의 throwable을 사용하는 것이 적절한 시기에 대해 프로그래머 간에 약간의 혼동이 있습니다.</p><p>검사 예외(<code>checked exception</code>)와 비검사 예외(<code>unchecked exception</code>)를 구분하는 기본 규칙은 간단합니다.</p><p>호출하는 쪽에서 복수할 수 있다고 생각된다면 <code>checked exception</code>를 사용합니다. <code>checked exception</code>를 던지면, <code>try-catch</code>로 처리하거나 <code>throw</code>를 이용해서 더 바깥쪽으로 전파하도록 강제합니다</p><p><code>unchecked exception</code>은 <code>runtime exception</code>와 <code>errors</code>가 있습니다. 이 이러한 경우는 프로그램에서 잡을 필요가 없거나 잡아도 득보다 실이 많은 경우입니다. 또한 <code>throwable</code>의 경우 직접 구현이 가능한데, <code>Exception</code>, <code>RuntimeException</code>, <code>Error</code> 클래스를 상속하지 않는 구현은 좋지 않습니다.</p><blockquote><p><a href="https://madplay.github.io/post/java-checked-unchecked-exceptions" target="_blank" rel="noopener noreferrer">Exception에 대한 글</a></p></blockquote><p>즉, 복구 가능한 조건에 대해서는 <code>checked exception</code>를 써야하고, 프로그래밍 오류에 대해서는 <code>runtime exception</code>를 던져야합ㄴ니다. 확실하지 않는 경우에서는 <code>unchecked exceptions</code>를 throw 합니다. <code>checked exception</code>이나 <code>runtime exception</code>가 아닌 경우, <code>throwable</code>을 정의하면 안됩니다.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="item-71-checked-exceptions의-불필요한-사용을-피합니다"></a>Item 71. <code>checked exceptions</code>의 불필요한 사용을 피합니다.<a class="hash-link" href="#item-71-checked-exceptions의-불필요한-사용을-피합니다" title="Direct link to heading">#</a></h2><p>많은 Java 프로그래머는 <code>checked exceptions</code>를 싫어하지만, 제대로 사용하게 되면 API와 프로그램을 향상시킬 수 있습니다. 하지만 이를 과하게 사용하거나 잘못 사용하면 불편한 API가 될 수 있습니다.</p><p>메서드가 <code>checked exceptions</code>를 던질 수 있는 경우에는, 이를 호출하는 곳에서 예외를 확인하고 <code>throw</code>해야합니다. 다만, <code>stream</code>에서는 사용할 수 없습니다.</p><p>일반적으로 <code>checked exceptions</code>와 <code>unchecked exceptions</code> 중 어떤 것을 선택해야할 지 고민되는 경우가 있는데, 이에 대해 조치를 할 수 있는 부분이라면 <code>checked exceptions</code>를 사용하고 그렇지 않으면 대부분은 <code>unchecked exceptions</code>를 사용하는 것이 중요합니다.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="checked-exceptions를-피하는-방법"></a>checked exceptions를 피하는 방법<a class="hash-link" href="#checked-exceptions를-피하는-방법" title="Direct link to heading">#</a></h3><p>대표적인 예시로, 예외 대신 빈 Optional을 사용하는 방법이 있습니다. (다만, 부가 정보를 담을 수 없습니다.)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 변경 전</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  obj.action(args);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch (TheCheckedException e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // 예외 핸들링</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 변경 후</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">if (obj.actionPermitted(args)) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  obj.action(args);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // 예외 조건 처리</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>다만 위 코드의 경우 예외에 대해 유연하게 처리할 수는 있지만, 객체 상태가 변할 수 있기 때문에 thread safe하지는 않습니다.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="item-72-표준-예외를-사용합니다"></a>Item 72. 표준 예외를 사용합니다.<a class="hash-link" href="#item-72-표준-예외를-사용합니다" title="Direct link to heading">#</a></h2><p>자바 라이브러리에서는 대부분의 API의 예외 발생 요구 사항을 대부분 처리하는데 도움이 되는 예외를 제공합니다. 따라서 예외도 재사용하는 것이 좋습니다. 예외 클래스의 수가 적을수록 메모리의 사용량이 줄며, 클래스 적재 시간도 적게 걸리며 사용자 입장에서도 읽기 쉽고 익숙합니다.</p><p>하지만, <code>Exception</code>, <code>RuntimeException</code>, <code>Throwable</code>를 재사용하거나 <code>Error</code>를 직접적으로 사용하는 경우는 매우 좋지 않습니다.</p><p>주로 사용하는 예외목록은 다음과 같습니다.</p><ul><li><code>IllegalArgumentException</code><ul><li>허용하지 않는 값이 인수로 건네진 경우</li><li>null의 경우는 <code>NullPointerException</code>이 처리</li></ul></li><li><code>IllegalStateException</code><ul><li>객체가 메서드를 수행하기에 적절하지 않은 상태인 경우</li></ul></li><li><code>NullPointerException</code><ul><li>null을 허용하지 않는 메서드에 null을 건낸 경우</li></ul></li><li><code>IndexOutOfBoundsException</code><ul><li>인덱스가 범위를 넘은 경우</li></ul></li><li><code>ConcurrentModificationException</code><ul><li>허용하지 않는 동시 수정이 발생된 경우</li></ul></li><li><code>UnsupportedOperationException</code><ul><li>호출된 메서드를 지원하지 않는 경우</li></ul></li></ul><p>이 외에도 더 필요한 경우에는 표준 예외를 확장하는 것이 좋습니다. 하지만, 예외는 직렬화할 수 있으며 이 경우네는 다만 부담이 크므로 사용하지 않는 것이 좋습니다.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="item-73-추상화에-수준에-맞는-예외를-던집니다"></a>Item 73. 추상화에 수준에 맞는 예외를 던집니다.<a class="hash-link" href="#item-73-추상화에-수준에-맞는-예외를-던집니다" title="Direct link to heading">#</a></h2><p>어떤 예외가 발생했을 때, 다른 예외가 발생하면 당황스럽습니다. 이런 경우는 메서드가 저수준 예외를 처리하지 않고, 상위로 전파했을 때 종종 발생합니다. 이를 피할려면 <code>exception translation</code> 기법을 사용하면 됩니다. 상위 계층에서 저수준의 예외를 잡아서 추상화 수준에 맞는 예외로 던지는 것입니다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // 저수준 추상화를 이용한다.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch (LowerLevelException e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // 추상화 수준에 맞게 번역한다.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  throw new HigherLevelException(...);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>다만, 무턱대고 예외를 전파하는 것보다는 <code>exception translation</code>가 더 좋지만, 이를 남용하는 것은 좋지않습니다. 가능하다면, 저수준 메서드가 반드시 성공해야합니다. 따라서 저수준에서 오류가 발생하지 않도록 상위에서 매개변수 값을 미리 검사하는 것도 방법입니다. 이를 통해서 사용자에게는 문제를 전파하지 않으면서도 개발자가 로그 분석이 가능합니다.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="item-74-각-메소드가-던진-모든-예외를-문서화합니다"></a>Item 74. 각 메소드가 던진 모든 예외를 문서화합니다.<a class="hash-link" href="#item-74-각-메소드가-던진-모든-예외를-문서화합니다" title="Direct link to heading">#</a></h2><p>메서드가 던지는 예외는 그 메서드를 올바르게 사용하게 하는 중요한 정보입니다. 따라서 문서화하는데 충분한 시간을 써야합니다.</p><p>개발자가 볼 수 있는 오류인 오류(Error)와 예외(Exception)에 대해 구분이 필요합니다. 오류의 경우는 시스템 적으로 정상적이지 않는 상황을 의미하며, 이는 low level에서 발생하기 때문에 개발자가 미리 처리하기 어렵습니다.</p><p>반면에 예외(Exception)의 경우는 개발자가 구현한 로직의 코드에서 발생합니다. 그렇기 때문에 이를 예방하고 대응할 수 있습니다. 따라서 이를 구분하고 이에따른 처리방법을 정리해놓는 것이 중요합니다.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="문서화를-하는-방법"></a>문서화를 하는 방법<a class="hash-link" href="#문서화를-하는-방법" title="Direct link to heading">#</a></h3><p><code>checked exception</code>의 경우는 항상 따로 하나씩 선언하고, 각 예외가 발생하는 상황을 <code>@throws</code> 태그를 통해서 정확하게 문서화해야합니다. 또한 확인되지 않은 예외에 대해서는 키워드를 사용하지 않는 것이 중요합니다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @param fileName</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @throws IOException</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public void someMethod(String fileName) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  try(Buffered br = new BufferedReader(new FileReader(filename))){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  } catch (IOException){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // exception handling</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>다만, <code>checked exception</code>의 경우에 공통적인 상위 클래스로 하나를 선언하는 것은 좋지 않습니다. 즉, <code>Exception</code>이라고 던지게 되면, 코드를 사용하는 입장에서 대처해야하는 예외에 대한 힌트를 제공하지 않는 것과 동일합니다. 다만, <code>main</code> 메서드에서는 괜찮습니다.</p><p><code>unchecked exception</code>의 경우도 문서화를 진행하면 좋습니다. 일반적으로 프로그래밍 오류를 뜻하는데 발생할 수 있는 오류를 명시하면 자엽스럽게 해당 오류가 발생하지 않도록 개발할 수 있습니다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @param divisor</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @throws ArithmeticException</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> *     Exception may occur when divisor is zero</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public int someMethod(int divisor) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // 피제수(dividend)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int dividend = 2_147_483_647;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // 몫(quotient)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    int quotient = dividend / divisor;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    return quotient;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  } catch (ArithmeticException e) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // divisor(제수)가 0인 경우</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>그러나 <code>unchecked exceptions</code>는 메서드의 <code>throw</code> 선언에는 넣지 않는 것이 좋습니다. 즉 아래처럼 하는 것이 좋습니다. (시각적으로 구분할 수 있습니다.)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @param divisor</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @throws ArithmeticException</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> *     Exception may occur when divisor is zero</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public int someMethod(int divisor) throws ArithmeticException {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // throws 선언에는 제외하는 것을 권장한다.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>특정 클래스에 대부분의 메서드가 같은 이유로 모두 동일한 예외를 던지면 이를 클래스에 추가될 수도 있습니다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @throws NullPointerException</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> *     All methods throw an exception if the argument is null.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class TestClass {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   * @param paramObj</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  public void someMethod1(Object paramObj) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(paramObj == null) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      throw new NullPointerException();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  /**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   * @param paramObj</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  public void someMethod2(Object paramObj) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    if(paramObj == null) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      throw new NullPointerException();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><a href="https://madplay.github.io/post/document-all-exceptions-thrown-by-each-method" target="_blank" rel="noopener noreferrer">추가 출처</a></p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="item-75-예외-세부-메시지에-실패-관련-정보를-담습니다"></a>Item 75. 예외 세부 메시지에 실패 관련 정보를 담습니다.<a class="hash-link" href="#item-75-예외-세부-메시지에-실패-관련-정보를-담습니다" title="Direct link to heading">#</a></h2><p>예외를 잡지 못하여 프로그램이 실패하면 시스템에서 자동으로 스택 추적(stack trace) 정보를 출력해줍니다. 이때 출력되는 문자열은 <code>Throwable</code> 클래스의 <code>toString</code> 메서드에서 반환하는 클래스 이름과 상세 메세지입니다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public String toString() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  String s = getClass().getName();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  String message = getLocalizedMessage();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return (message != null) ? (s + &quot;: &quot; + message) : s;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>실패 순간을 적절하게 포착할려면 <strong>발생한 예외에 관련된 모든 매개변수와 필드의 값을 실패 메세지에 담아야합니다.</strong> 예를 들어 IndexOutOfBoundsException 이라면 범위의 최솟값, 최댓값 그리고 범위를 벗어난 인덱스의 값을 담아야합니다.</p><p>하지만 주의할 점도 있습니다. 관련된 데이터를 모두 담아야하지만 <strong>실패 원인을 분석할 때 도움이 되는 정보만을 담아야합니다.</strong> 또한 보안과 관련된 정보는 포함하면 안됩니다. 상세 메세지에 비밀번호나 암호화 키 같은 정보는 필요없습니다.</p><p>아래 코드는 그 예시를 보여주는 코드입니다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/**</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * Constructs an IndexOutOfBoundsException.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> *</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @param lowerBound the lowest legal index value</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @param upperBound the highest legal index value plus one</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> * @param index      the actual index value</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> */</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public IndexOutOfBoundsException(int lowerBound, int upperBound, int index) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // Generate a detail message that captures the failure</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  super(String.format(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Lower bound: %d, Upper bound: %d, Index: %d&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    lowerBound, upperBound, index));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // Save failure information for programmatic access</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.lowerBound = lowerBound;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.upperBound = upperBound;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  this.index = index;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="item-76-가능한-한-failure-atomicity으로-만듭니다"></a>Item 76. 가능한 한 <code>failure atomicity</code>으로 만듭니다.<a class="hash-link" href="#item-76-가능한-한-failure-atomicity으로-만듭니다" title="Direct link to heading">#</a></h2><p><code>failure atomicity</code>란, <strong>호출한 메서드가 실패해도 호출 전 상태를 유지하는 것을 의미</strong>합니다. 또한 이를 지키는 것이 중요합니다.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="failure-atomicity"></a><code>failure atomicity</code><a class="hash-link" href="#failure-atomicity" title="Direct link to heading">#</a></h3><p>호출된 메서드가 실패하더라도, 해당 객체는 메서드 호출 전 상태를 유지하려는 특성을 의미합니다.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="메서드를-failure-atomicity로-만드는-방법"></a>메서드를 <code>failure atomicity</code>로 만드는 방법<a class="hash-link" href="#메서드를-failure-atomicity로-만드는-방법" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="불변-객체로-설계앟ㅂ니다"></a>불변 객체로 설계앟ㅂ니다.<a class="hash-link" href="#불변-객체로-설계앟ㅂ니다" title="Direct link to heading">#</a></h4><ul><li>불변 객체는 생성 시점에 고정되어 절대 변하지 않기 때문에 기존 객체가 불안정한 상태가 될 일은 없습니다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="로직을-수행하기-전에-매개변수의-유효성을-검사합니다"></a>로직을 수행하기 전에 매개변수의 유효성을 검사합니다.<a class="hash-link" href="#로직을-수행하기-전에-매개변수의-유효성을-검사합니다" title="Direct link to heading">#</a></h4><ul><li>객체의 내부 상태를 변경하기 전에 잠재적 예외 가능성의 대부분을 걸러냅니다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">public Object pop() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  if (size == 0)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    throw new EmptyStackException();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Object result = elements[--size];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  elements[size] = null; // 다 쓴 참조 해제</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return result;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="실패한-가능성이-있는-모든-코드를-객체의-상태를-바꾸는-코드-앞에-배치합니다"></a>실패한 가능성이 있는 모든 코드를, 객체의 상태를 바꾸는 코드 앞에 배치합니다.<a class="hash-link" href="#실패한-가능성이-있는-모든-코드를-객체의-상태를-바꾸는-코드-앞에-배치합니다" title="Direct link to heading">#</a></h4><ul><li>로직을 수행하기 전에 인수의 유효성을 검사하기 어려울 때 사용할 수 있습니다.</li><li>예를 들어, <code>TreeMap</code>의 경우 잘못된 타입의 원소를 추가하는 경우, <code>ClassCastException</code> 에러가 발생합니다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="객체의-임시-복사본에서-작업을-수행한-후에-성공적으로-완료되면-원래-객체와-교체합니다"></a>객체의 임시 복사본에서 작업을 수행한 후에 성공적으로 완료되면 원래 객체와 교체합니다.<a class="hash-link" href="#객체의-임시-복사본에서-작업을-수행한-후에-성공적으로-완료되면-원래-객체와-교체합니다" title="Direct link to heading">#</a></h4><ul><li>데이터를 임시 자료 구조에 저장해 작업하는 것이 더 빠를 때 적용하기 좋은 방법입니다.</li><li><code>List</code> 클래스의 <code>compare</code> aptjemrk rmfjgtmqslek.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">default void sort(Comparator&lt;? super E&gt; c) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Object[] a = this.toArray();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Arrays.sort(a, (Comparator) c);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ListIterator&lt;E&gt; i = this.listIterator();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  for (Object e : a) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    i.next();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    i.set((E) e);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="작업-도중에-발생하는-실패를-가로채는-복구-코드를-작성해서-작업-전-상태로-되돌립니다"></a>작업 도중에 발생하는 실패를 가로채는 복구 코드를 작성해서 작업 전 상태로 되돌립니다.<a class="hash-link" href="#작업-도중에-발생하는-실패를-가로채는-복구-코드를-작성해서-작업-전-상태로-되돌립니다" title="Direct link to heading">#</a></h4><p>주로 디스크 기반의 내구성(durability)를 보장해야하는 자료구조에 쓰이는데 자주 사용되는 방법은 아닙니다.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="failure-atomicity을-항상-지킬-수-있나요"></a><code>failure atomicity</code>을 항상 지킬 수 있나요...<a class="hash-link" href="#failure-atomicity을-항상-지킬-수-있나요" title="Direct link to heading">#</a></h3><p>예를 들어 <code>ConcurrentModificationException</code>을 잡아내도 그 객체를 여전히 사용할 수 있는 상태라고 가정하면 안됩니다. 이런 경우의 오류는 복구할 수 없기 때문에 이를 보존할려고 시도할 필요가 없습니다. 따라서 권장되는 부분이지만, 항상 <code>failure atomicity</code>를 지킬 수 없습니다.</p><p><code>failure atomicity</code>으로 만들 수 있도록, 항상 그래야하는 것도 아닙니다. 이를 달성하기 위한 비용이 크거나 복잡도가 아주 큰 연산이 있을 수 있기 때문입니다. 이 규칙을 지키지 못하면 실패시의 객체 상태를 API 설명에 명시해야합니다.</p><p>따라서 Error는 복구할 수 없으므로 <code>AssertionError</code>에 대해서는 실패 원자적으로는 만들려는 시도가 필요가 없습니다.</p><br><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="item-77-예외를-무시하면-안됩니다"></a>Item 77. 예외를 무시하면 안됩니다.<a class="hash-link" href="#item-77-예외를-무시하면-안됩니다" title="Direct link to heading">#</a></h2><p>예외가 선언된 API는 그 메서드를 사용할 때 적절한 조치를 해야합니다. 따라서 catch 블랙을 비워두면 이는 존재할 이유가 없습니다.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// 의미 없는 코드</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">} catch (SomeException e) {}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>물론 예외를 무시해야하는 경우가 있습니다. 예를 들어 <code>FileInputStream</code>을 닫을 때 그렇습니다. 파일의 상태를 변경하지 않으니 복구할 것이 없고 스트림을 닫는 경우는 필요한 내용을 모두 다 읽어야한다는 뜻입니다.</p><p>그래도 예외를 무시하기로 했다면 <code>catch</code>블록 안에서 그렇게 결정한 이유를 주석으로 남기고 예외의 이름도 변경해야합니다.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Azderica/til/edit/main/docs/Java/effective-java/ch9.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/til/docs/Java/effective-java/ch8"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« General Programming</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/til/docs/Java/effective-java/ch10"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Concurrency (동시성) »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#item-69-예외는-진짜-예외-상황에서만-사용합니다" class="table-of-contents__link">Item 69. 예외는 진짜 예외 상황에서만 사용합니다.</a></li><li><a href="#item-70-복구-가능한-조건에는-체크된-예외를-사용하고-프로그래밍-오류에는-런타임-예외를-사용합니다" class="table-of-contents__link">Item 70. 복구 가능한 조건에는 체크된 예외를 사용하고, 프로그래밍 오류에는 런타임 예외를 사용합니다.</a></li><li><a href="#item-71-checked-exceptions의-불필요한-사용을-피합니다" class="table-of-contents__link">Item 71. <code>checked exceptions</code>의 불필요한 사용을 피합니다.</a><ul><li><a href="#checked-exceptions를-피하는-방법" class="table-of-contents__link">checked exceptions를 피하는 방법</a></li></ul></li><li><a href="#item-72-표준-예외를-사용합니다" class="table-of-contents__link">Item 72. 표준 예외를 사용합니다.</a></li><li><a href="#item-73-추상화에-수준에-맞는-예외를-던집니다" class="table-of-contents__link">Item 73. 추상화에 수준에 맞는 예외를 던집니다.</a></li><li><a href="#item-74-각-메소드가-던진-모든-예외를-문서화합니다" class="table-of-contents__link">Item 74. 각 메소드가 던진 모든 예외를 문서화합니다.</a><ul><li><a href="#문서화를-하는-방법" class="table-of-contents__link">문서화를 하는 방법</a></li></ul></li><li><a href="#item-75-예외-세부-메시지에-실패-관련-정보를-담습니다" class="table-of-contents__link">Item 75. 예외 세부 메시지에 실패 관련 정보를 담습니다.</a></li><li><a href="#item-76-가능한-한-failure-atomicity으로-만듭니다" class="table-of-contents__link">Item 76. 가능한 한 <code>failure atomicity</code>으로 만듭니다.</a><ul><li><a href="#failure-atomicity" class="table-of-contents__link"><code>failure atomicity</code></a></li><li><a href="#메서드를-failure-atomicity로-만드는-방법" class="table-of-contents__link">메서드를 <code>failure atomicity</code>로 만드는 방법</a></li><li><a href="#failure-atomicity을-항상-지킬-수-있나요" class="table-of-contents__link"><code>failure atomicity</code>을 항상 지킬 수 있나요...</a></li></ul></li><li><a href="#item-77-예외를-무시하면-안됩니다" class="table-of-contents__link">Item 77. 예외를 무시하면 안됩니다.</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/til/assets/js/runtime~main.5896d016.js"></script>
<script src="/til/assets/js/main.c4550fed.js"></script>
</body>
</html>