---
sidebar_position: 10
---

# 10. Redux

## 리덕스란?

- Redux is a predictable state container for JavaScript apps.
- 자바스크립트 애플리케이션을 위한 상태 관리 라이브러리 입니다.

### Props

1. properties의 줄임말
2. Props는 구성 요소가 서로 통신하는 방법입니다.
3. props는 상위 구성 요소에서 아래쪽으로 흐릅니다.
4. 해당 값을 변경하려면 자식 관점에서 Props를 변경할 수 있으며, 부모는 내부 상태를 변경해야 합니다.

### State

1. parent component에서 child component로 data를 보내는게 아닌 그 component 안에서데이터를 전달하려면? State으로 예를 들어서 검색 창에 글을 입력할떄 글이 변하는것은 state을 바꿈
2. State is mutable
3. State 이 변하면 re-render 됩니다.

> 그래서 Redux는 State을 관리하는 것

![Redux Data Flow](https://user-images.githubusercontent.com/42582516/223134699-274f1d51-3096-4b61-b46a-b5cc08faa29a.png)

- Reducer는 pure function이기에 reducer 내부에서 하지 말아야 할것들 !!!
  - Mutate its arguments
  - Perform side effects like API calls and routing transistions
  - Call non-pure functions (ex. `Date.now()`, `Math.random()`)

### Redux Store

- 이들을 하나로 모으는 객체 저장소는 애플리케이션의 전체 상태 트리를 보유합니다.
- 내부 상태를 변경하는 유일한 방법은 해당 상태에 대한 Action을 전달하는 것입니다.
- Redux Store는 클래스가 아닙니다. 몇 가지 Methods가 있는 객체일 뿐입니다.

<br/>

## 미들웨어 없이 리덕스 카운터 앱 만들기

- `npx create-react-app my-app --template typescript`
- `npm install redux --save`

### `CreateStore()`

- 앱의 전체 상태 트리를 보유하는 Redux 저장소를 만듭니다. 앱에는 하나의 스토어만 있어야 합니다.

### `getState()`

- [getstate](https://redux.js.org/api/store#getstate)
- 애플리케이션의 현재 상태 트리를 반환합니다. 스토어의 리듀서가 반환한 마지막 값과 같습니다

### `subscribe()`

- [subscribelistener](https://redux.js.org/api/store#subscribelistener)
- change listener를 추가합니다. 작업이 전달될 때마다 호출되며 상태 트리의 일부가 잠재적으로 변경되었을 수 있습니다. 그런다음 getState()를 호출하여 콜백 내부의 현재 상태 트리를 읽을 수 있습니다

<br/>

## combineReducers

### root reducer와 sub reducer

- 현재까지 counter 리듀서만 있는데 하나를 더 추가해주려면 Root 리듀서를 만들어서 그 아래 counter와 todos라는 서브(sub)리듀서를 넣어주면 됩니다. 
- Root 리듀서를 만들 때 사용하는 것이 combineReducers 입니다.

<br/>

## Redux Provider

### Provider란?

- `<Provider>` 구성 요소는 Redux Store 저장소에 액세스해야 하는 모든 중첩 구성 요소에서 Redux Store 저장소를 사용할 수 있도록 합니다.
- React Redux 앱의 모든 React 구성 요소는 저장소에 연결할 수 있으므로 대부분의 응용 프로그램은 전체 앱의 구성 요소 트리가 내부에 있는 최상위 수준에서 `<Provider>`를 렌더링합니다.
- 그런 다음 Hooks 및 연결 API는 React의 컨텍스트 메커니즘을 통해 제공된 저장소 인스턴스에 액세스할 수 있습니다.

### Provider를 렌더링

- React Redux 앱의 모든 React 구성 요소는 저장소에 연결할 수 있으므로 대부분의 응용 프로그램은 전체 앱의 구성 요소 트리가 내부에 있는 최상위 수준에서 `<Provider>`를 렌더링합니다.

<br/>

## useSelector & useDispatch

### provider로 둘러 쌓인 컴포넌트에서 store접근

- 리액트에 Hooks가 있듯이 리덕스에도 Hooks가 있는데 그게 바로 useSelector와 useDispatch입니다. 이 두 개를 이용해서 provider로 useSelector Hooks를 이용해서 스토어의 값을 가져올 수 있습니다.