---
sidebar_position: 1
---

# 1. 사용자 수에 따른 규모 확장성

## 단일 서버

- 웹 앱, 데이터베이스, 캐시 등이 전부 서버 한 대에서 실행

![사용자 흐름](https://user-images.githubusercontent.com/42582516/183911066-fd3cb5e7-c255-438b-a6de-50352e9f8639.png)

- 단말은 2개 입니다.
  - 웹 애플리케이션
  - 모바일 앱

<br/>

## 데이터베이스

- 사용자가 늘면 서버 하나로는 충분하지 않아, 트래픽 용과 데이터베이스용으로 분리합니다.

![데이터베이스 추가](https://user-images.githubusercontent.com/42582516/183911434-97c5c976-2aec-4aee-a49f-4172a9f9b7ea.png)

### 어떤 데이터베이스

- 대부분의 경우, 관계형 데이터베이스가 좋음
- 비 관계형 데이터베이스가 좋은 경우는 다음과 같습니다.
  - 아주 낮은 응답 지연시간(latency)이 요구됨
  - 다루는 데이터가 비정형(unstructured)이라 관계형 데이터가 아님
  - 데이터(JSON, YAML, XML 등)를 직렬화하거나(serialize) 역직렬화(deserialize) 할 수 있기만 하면 됨
  - 아주 많은 양의 데이터를 저장할 필요가 있음.


<br/>

## 수직적 규모 확장 vs 수평적 규모 확장

- 서버로 유입되는 트래픽의 양이 적을 때는 수직적 확장이 좋은 선택이며, 이 방법의 가장 큰 장점은 단순함입니다.
- 그러나 아래의 단점이 있습니다.
  - 수직적 규모 확장에는 한계가 있습니다. 한 대의 서버에 CPU나 메모리를 무한대로 증설할 방법은 없습니다.
  - 수직적 규모 확장법은 장애에 대한 자동복구(failover) 방안이나 다중화(redundancy) 방안을 제시하지 않습니다. 서버에 장애가 발생시 웹사이트/앱은 완전히 중단됩니다.

### 로드밸런서

- 부하 분산 집합(load balancing set)에 속한 웹 서버들에게 트래픽 부하를 고르게 분산하는 역할을 합니다.
- 웹 계정에서는 이와 같은 방법으로 처리합니다.

#### 데이터베이스 다중화

- 많은 데이터베이스 관리 시스템이 다중화를 지원합니다. 일반적으로 주(master)과 부(slave) 관계를 설정합니다.
- 대부분의 애플리케이션은 읽기 연산의 비중이 쓰기 연산보다 훨씬 높습니다.
- 데이터베이스를 다중화하면 다음과 같은 이득이 있습니다.
  - 더 나은 성능 : 읽기 연산은 분산되므로, 처리될 수 있는 질의(query) 수가 늘어나서 성능이 좋습니다.
  - 안정성 : 일부가 파괴되어도 데이터는 보존 가능
  - 가용성 : 장애 발생 시, 다른 서버의 데이터로 서비스 가능

![로드밸런서와 데이터베이스 다중화](https://user-images.githubusercontent.com/42582516/183915101-7e07ddc8-5210-4304-a23d-f492af1aeaea.png)

<br/>

## 캐시

<br/>

## 콘텐츠 전송 네트워크(CDN)

<br/>

## 무상태(stateless) 웹 계층

<br/>

## 데이터 센터

<br/>

## 메시지 큐

<br/>

## 로그, 메트릭 그리고 자동화

<br/>

## 데이터베이스의 규모 확장

<br/>

## 백만 사용자, 그리고 그 이상