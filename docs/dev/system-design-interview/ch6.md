---
sidebar_position: 6
---

# 6. 키-값 저장소 설계

- 키-값 저장소(key-value store)는 키-값 데이터베이스라고 불리는 비 관계형 데이터베이스입니다.
- 키-값 쌍에서의 키는 유일해야하며 해당 키에 달린 값은 키를 통해서만 접근할 수 있습니다.

## 문제 이해 및 설계 범위 확정

- 완벽한 설계는 없습니다.
- 다음 특성을 갖는 설계해 볼 수 있습니다.
  - 키-값 쌍의 크기는 10KB 이하입니다.
  - 큰 데이터를 저장할 수 있어야 합니다.
  - 높은 가용성을 제공해야 합니다. 따라서 시스템은 설사 장애가 있더라도 빨리 응답해야 합니다.
  - 높은 규모 확장성을 제공해야 합니다. 따라서 트래픽 양에 따라 자동적으로 서버 증설/삭제가 이루어져야 합니다.
  - 데이터 일관성 수준은 조정이 가능해야 합니다.
  - 응답 지연시간(latency)이 짧아야 합니다.

<br/>

## 단일 서버 키-값 저장소

- 한 대 서버만 사용하는 키-값 저장소를 설계하는 것은 쉽습니다.
- 이 방법은 빠른 속도를 보장하지만, 모든 데이터를 메모리 안에 두는 것이 불가능할 수도 있다는 약접이 있습니다. 이를 해결할 해결책은 다음과 같습니다.
  - 데이터 압축(compression)
  - 자주 쓰이는 데이터만 메모리에 두고 나머지는 디스크에 저장
- 그러나 한 대 서버로 부족한 때가 곧 찾아옵니다.

<br/>

## 분산 키-값 저장소

- 분산 키-값 저장소는 분산 해시 테이블이라고도 불립니다.
- 분산 시스템을 설계할 때는 CAP 정리(Consistency, Availability, Partition Tolerance theorem)를 알고 있어야 합니다.

### CAP 정리

<br/>

## 요약